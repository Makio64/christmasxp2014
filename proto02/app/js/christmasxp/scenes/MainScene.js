var MainScene,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

MainScene = (function(_super) {
  __extends(MainScene, _super);

  function MainScene() {
    this.createGUI = __bind(this.createGUI, this);
    this.onMirrorLoad = __bind(this.onMirrorLoad, this);
    this.onDiamondLoad = __bind(this.onDiamondLoad, this);
    this.addEvent = __bind(this.addEvent, this);
    this.createLight = __bind(this.createLight, this);
    this.createBackground = __bind(this.createBackground, this);
    var loader;
    this.mouse = new THREE.Vector2(window.innerWidth / 2, window.innerHeight / 2);
    this.time = 0;
    this.useMap = true;
    this.shading = THREE.FlatShading;
    this.opacity = 1;
    this.container = new THREE.Object3D();
    Stage3d.add(this.container);
    this.createLight();
    this.map = THREE.ImageUtils.loadTexture("./3d/textures/preview01.jpg");
    this.envMap = THREE.ImageUtils.loadTextureCube(["./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg"]);
    loader = new THREE.JSONLoader();
    loader.load('./3d/json/crystal.js', this.onDiamondLoad);
    loader = new THREE.JSONLoader();
    loader.load('./3d/json/mirror.js', this.onMirrorLoad);
    this.createBackground();
    this.createGUI();
    this.addEvent();
    Stage3d.initPostprocessing(this.gui);
    return;
  }

  MainScene.prototype.createBackground = function() {
    var geometry, i, material, mesh, _i, _ref;
    material = new THREE.MeshLambertMaterial({
      wireframe: false,
      color: 0xFFFFFF
    });
    geometry = new THREE.PlaneBufferGeometry(1000, 1000, 16, 16);
    for (i = _i = 1, _ref = geometry.attributes.position.array.length; _i < _ref; i = _i += 3) {
      geometry.attributes.position.array[i + 1] += 60 * Math.random();
    }
    geometry.attributes.position.needsUpdate = true;
    geometry.attributes.normal.needsUpdate = true;
    geometry.computeTangents();
    geometry.computeVertexNormals();
    mesh = new THREE.Mesh(geometry, material);
    mesh.position.z = -1000;
  };

  MainScene.prototype.createLight = function() {
    this.ambientLight = new THREE.AmbientLight(0xAAAAAA);
    Stage3d.add(this.ambientLight);
    this.cameraLight = new THREE.PointLight(0x443355, .3, 200);
    this.cameraLight.position.set(30, 60, 60);
    Stage3d.add(this.cameraLight);
    this.cameraLight2 = new THREE.PointLight(0x443355, .2, 200);
    this.cameraLight2.position.set(30, 60, 60);
    Stage3d.add(this.cameraLight2);
  };

  MainScene.prototype.addEvent = function() {
    window.addEventListener('mousemove', (function(_this) {
      return function(e) {
        _this.mouse.x = e.clientX;
        return _this.mouse.y = e.clientY;
      };
    })(this), false);
  };

  MainScene.prototype.onDiamondLoad = function(geometry) {
    var folder, material;
    this.computeGeometry(geometry);
    material = new THREE.MeshLambertMaterial({
      color: 0xffffff,
      transparent: true,
      envMap: this.envMap
    });
    if (this.useMap) {
      material.map = this.map;
    }
    material.shading = this.shading;
    material.opacity = .85;
    material.side = THREE.DoubleSide;
    material.combine = THREE.MixOperation;
    this.diamond = new THREE.Mesh(geometry, material);
    this.container.add(this.diamond);
    folder = this.gui.addFolder('diamond');
    folder.add(this.diamond.material, 'opacity', 0, 1);
    folder.add(this.diamond.material, 'reflectivity', 0, 1);
    this.diamondColor = 0xffffff;
    folder.add(this.diamond.material, 'combine', {
      multiply: THREE.Multiply,
      mix: THREE.MixOperation,
      add: THREE.AddOperation
    });
    folder.addColor(this, 'diamondColor').onChange((function(_this) {
      return function() {
        console.log(_this.diamond.material);
        return _this.diamond.material.color.setHex(_this.diamondColor);
      };
    })(this));
  };

  MainScene.prototype.onMirrorLoad = function(geometry) {
    var folder, material;
    this.computeGeometry(geometry);
    material = new THREE.MeshLambertMaterial({
      color: 0xffffff,
      transparent: true,
      envMap: this.envMap
    });
    if (this.useMap) {
      material.map = this.map;
    }
    material.shading = this.shading;
    material.combine = THREE.AddOperation;
    material.reflectivity = .41;
    material.opacity = 0.9;
    console.log(material);
    if (this.mirror) {
      this.container.remove(this.mirror);
    }
    this.mirror = new THREE.Mesh(geometry, material);
    this.container.add(this.mirror);
    folder = this.gui.addFolder('mirror');
    folder.add(this.mirror.material, 'opacity', 0, 1);
    folder.add(this.mirror.material, 'reflectivity', 0, 1);
    this.mirrorColor = 0xffffff;
    folder.add(this.mirror.material, 'combine', {
      multiply: THREE.Multiply,
      mix: THREE.MixOperation,
      add: THREE.AddOperation
    });
    folder.addColor(this, 'mirrorColor').onChange((function(_this) {
      return function() {
        return _this.mirror.material.color.setHex(_this.mirrorColor);
      };
    })(this));
  };

  MainScene.prototype.createGUI = function() {
    this.gui = new dat.GUI();
    this.textures = null;
    this.maps = [THREE.ImageUtils.loadTexture("./3d/textures/preview01.jpg"), THREE.ImageUtils.loadTexture("./3d/textures/crystal.jpg"), THREE.ImageUtils.loadTexture("./3d/textures/mario.png")];
    this.envMaps = [THREE.ImageUtils.loadTextureCube(["./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg", "./3d/textures/preview01.jpg"]), THREE.ImageUtils.loadTextureCube(["./3d/textures/crystal.jpg", "./3d/textures/crystal.jpg", "./3d/textures/crystal.jpg", "./3d/textures/crystal.jpg", "./3d/textures/crystal.jpg", "./3d/textures/crystal.jpg"]), THREE.ImageUtils.loadTextureCube(["./3d/textures/mario.png", "./3d/textures/mario.png", "./3d/textures/mario.png", "./3d/textures/mario.png", "./3d/textures/mario.png", "./3d/textures/mario.png"])];
    this.gui.add(this, 'textures', {
      xp1: '0',
      xp2: '1',
      xp3: '2'
    }).onChange((function(_this) {
      return function(e) {
        _this.mirror.material.map = _this.maps[_this.textures];
        _this.mirror.material.envMaps = _this.envMaps[_this.textures];
        _this.diamond.material.envMap = _this.envMaps[_this.textures];
        _this.diamond.material.needsUpdate = true;
        console.log(_this.diamond.material);
      };
    })(this));
  };

  MainScene.prototype.computeGeometry = function(geometry) {
    geometry.computeBoundingSphere();
    geometry.computeFaceNormals();
    geometry.computeVertexNormals();
    geometry.computeTangents();
    geometry.computeMorphNormals();
    geometry.verticesNeedUpdate = true;
    geometry.normalsNeedUpdate = true;
  };

  MainScene.prototype.update = function(dt) {
    this.time += dt;
    this.cameraLight.position.x = Math.cos(this.time * 0.001) * 100;
    this.cameraLight2.position.x = Math.cos(this.time * 0.0015) * 120;
    this.cameraLight2.position.y = Math.sin(this.time * 0.0015) * 120;
    this.container.rotation.y += (this.mouse.x / window.innerWidth - .5 - this.container.rotation.y) * .09;
    this.container.rotation.x += (this.mouse.y / window.innerWidth - .5 - this.container.rotation.x) * .09;
  };

  return MainScene;

})(Scene);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNocmlzdG1hc3hwL3NjZW5lcy9NYWluU2NlbmUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsU0FBQTtFQUFBOztpU0FBQTs7QUFBQTtBQUVDLDhCQUFBLENBQUE7O0FBQVksRUFBQSxtQkFBQSxHQUFBO0FBRVgsaURBQUEsQ0FBQTtBQUFBLHVEQUFBLENBQUE7QUFBQSx5REFBQSxDQUFBO0FBQUEsK0NBQUEsQ0FBQTtBQUFBLHFEQUFBLENBQUE7QUFBQSwrREFBQSxDQUFBO0FBQUEsUUFBQSxNQUFBO0FBQUEsSUFBQSxJQUFDLENBQUEsS0FBRCxHQUFhLElBQUEsS0FBSyxDQUFDLE9BQU4sQ0FBYyxNQUFNLENBQUMsVUFBUCxHQUFrQixDQUFoQyxFQUFrQyxNQUFNLENBQUMsV0FBUCxHQUFtQixDQUFyRCxDQUFiLENBQUE7QUFBQSxJQUNBLElBQUMsQ0FBQSxJQUFELEdBQVEsQ0FEUixDQUFBO0FBQUEsSUFFQSxJQUFDLENBQUEsTUFBRCxHQUFVLElBRlYsQ0FBQTtBQUFBLElBR0EsSUFBQyxDQUFBLE9BQUQsR0FBVyxLQUFLLENBQUMsV0FIakIsQ0FBQTtBQUFBLElBSUEsSUFBQyxDQUFBLE9BQUQsR0FBVyxDQUpYLENBQUE7QUFBQSxJQU1BLElBQUMsQ0FBQSxTQUFELEdBQWlCLElBQUEsS0FBSyxDQUFDLFFBQU4sQ0FBQSxDQU5qQixDQUFBO0FBQUEsSUFRQSxPQUFPLENBQUMsR0FBUixDQUFZLElBQUMsQ0FBQSxTQUFiLENBUkEsQ0FBQTtBQUFBLElBVUEsSUFBQyxDQUFBLFdBQUQsQ0FBQSxDQVZBLENBQUE7QUFBQSxJQVlBLElBQUMsQ0FBQSxHQUFELEdBQU8sS0FBSyxDQUFDLFVBQVUsQ0FBQyxXQUFqQixDQUE2Qiw2QkFBN0IsQ0FaUCxDQUFBO0FBQUEsSUFhQSxJQUFDLENBQUEsTUFBRCxHQUFVLEtBQUssQ0FBQyxVQUFVLENBQUMsZUFBakIsQ0FBaUMsQ0FBQyw2QkFBRCxFQUErQiw2QkFBL0IsRUFDekMsNkJB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QUMsRUFBRCxHQUFBO0FBQ04sSUFBQSxJQUFDLENBQUEsSUFBRCxJQUFTLEVBQVQsQ0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBdEIsR0FBMEIsSUFBSSxDQUFDLEdBQUwsQ0FBUyxJQUFDLENBQUEsSUFBRCxHQUFNLEtBQWYsQ0FBQSxHQUFzQixHQUZoRCxDQUFBO0FBQUEsSUFHQSxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixHQUEyQixJQUFJLENBQUMsR0FBTCxDQUFTLElBQUMsQ0FBQSxJQUFELEdBQU0sTUFBZixDQUFBLEdBQXVCLEdBSGxELENBQUE7QUFBQSxJQUlBLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLEdBQTJCLElBQUksQ0FBQyxHQUFMLENBQVMsSUFBQyxDQUFBLElBQUQsR0FBTSxNQUFmLENBQUEsR0FBdUIsR0FKbEQsQ0FBQTtBQUFBLElBS0EsSUFBQyxDQUFBLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBcEIsSUFBeUIsQ0FBQyxJQUFDLENBQUEsS0FBSyxDQUFDLENBQVAsR0FBUyxNQUFNLENBQUMsVUFBaEIsR0FBMkIsRUFBM0IsR0FBZ0MsSUFBQyxDQUFBLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBckQsQ0FBQSxHQUF3RCxHQUxqRixDQUFBO0FBQUEsSUFNQSxJQUFDLENBQUEsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFwQixJQUF5QixDQUFDLElBQUMsQ0FBQSxLQUFLLENBQUMsQ0FBUCxHQUFTLE1BQU0sQ0FBQyxVQUFoQixHQUEyQixFQUEzQixHQUFnQyxJQUFDLENBQUEsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFyRCxDQUFBLEdBQXdELEdBTmpGLENBRE07RUFBQSxDQS9LUCxDQUFBOzttQkFBQTs7R0FGdUIsTUFBeEIsQ0FBQSIsImZpbGUiOiJjaHJpc3RtYXN4cC9zY2VuZXMvTWFpblNjZW5lLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTWFpblNjZW5lIGV4dGVuZHMgU2NlbmVcblxuXHRjb25zdHJ1Y3RvcjooKS0+XG5cblx0XHRAbW91c2UgPSBuZXcgVEhSRUUuVmVjdG9yMih3aW5kb3cuaW5uZXJXaWR0aC8yLHdpbmRvdy5pbm5lckhlaWdodC8yKVxuXHRcdEB0aW1lID0gMFxuXHRcdEB1c2VNYXAgPSB0cnVlXG5cdFx0QHNoYWRpbmcgPSBUSFJFRS5GbGF0U2hhZGluZ1xuXHRcdEBvcGFjaXR5ID0gMVxuXG5cdFx0QGNvbnRhaW5lciA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xuXHRcdCMgQGNvbnRhaW5lci5wb3NpdGlvbi55IC09IDEwO1xuXHRcdFN0YWdlM2QuYWRkKEBjb250YWluZXIpXG5cblx0XHRAY3JlYXRlTGlnaHQoKVxuXG5cdFx0QG1hcCA9IFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUoXCIuLzNkL3RleHR1cmVzL3ByZXZpZXcwMS5qcGdcIilcblx0XHRAZW52TWFwID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZUN1YmUoW1wiLi8zZC90ZXh0dXJlcy9wcmV2aWV3MDEuanBnXCIsXCIuLzNkL3RleHR1cmVzL3ByZXZpZXcwMS5qcGdcIlxuXHRcdFx0LFwiLi8zZC90ZXh0dXJlcy9wcmV2aWV3MDEuanBnXCIsXCIuLzNkL3RleHR1cmVzL3ByZXZpZXcwMS5qcGdcIlxuXHRcdFx0LFwiLi8zZC90ZXh0dXJlcy9wcmV2aWV3MDEuanBnXCIsXCIuLzNkL3RleHR1cmVzL3ByZXZpZXcwMS5qcGdcIl0pXG5cblx0XHRsb2FkZXIgPSBuZXcgVEhSRUUuSlNPTkxvYWRlcigpXG5cdFx0bG9hZGVyLmxvYWQoICcuLzNkL2pzb24vY3J5c3RhbC5qcycsIEBvbkRpYW1vbmRMb2FkIClcblxuXHRcdGxvYWRlciA9IG5ldyBUSFJFRS5KU09OTG9hZGVyKClcblx0XHRsb2FkZXIubG9hZCggJy4vM2QvanNvbi9taXJyb3IuanMnLCBAb25NaXJyb3JMb2FkIClcblxuXHRcdEBjcmVhdGVCYWNrZ3JvdW5kKClcblx0XHRAY3JlYXRlR1VJKClcblx0XHRAYWRkRXZlbnQoKVxuXHRcdFN0YWdlM2QuaW5pdFBvc3Rwcm9jZXNzaW5nKEBndWkpXG5cblx0XHRyZXR1cm5cblxuXHRjcmVhdGVCYWNrZ3JvdW5kOigpPT5cblx0XHRtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKHsgd2lyZWZyYW1lOmZhbHNlLGNvbG9yOjB4RkZGRkZGfSlcblxuXHRcdGdlb21ldHJ5ID0gIG5ldyBUSFJFRS5QbGFuZUJ1ZmZlckdlb21ldHJ5KDEwMDAsIDEwMDAsIDE2LCAxNilcblx0XHRmb3IgaSBpbiBbMS4uLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXkubGVuZ3RoXSBieSAzXG5cdFx0XHRnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5W2krMV0gKz0gNjAqTWF0aC5yYW5kb20oKVxuXHRcdGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlXG5cdFx0Z2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwubmVlZHNVcGRhdGUgPSB0cnVlXG5cdFx0Z2VvbWV0cnkuY29tcHV0ZVRhbmdlbnRzKCk7XG5cdFx0Z2VvbWV0cnkuY29tcHV0ZVZlcnRleE5vcm1hbHMoKVxuXG5cdFx0IyBjb25zb2xlLmxvZyBnZW9tZXRyeVxuXHRcdG1lc2ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpXG5cdFx0bWVzaC5wb3NpdGlvbi56ID0gLTEwMDBcblx0XHQjIFN0YWdlM2QuYWRkKG1lc2gpXG5cblx0XHRyZXR1cm5cblxuXHRjcmVhdGVMaWdodDooKT0+XG5cdFx0QGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhBQUFBQUEpXG5cdFx0U3RhZ2UzZC5hZGQoQGFtYmllbnRMaWdodClcblx0XHRcblx0XHRAY2FtZXJhTGlnaHQgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweDQ0MzM1NSwgLjMsIDIwMClcblx0XHRAY2FtZXJhTGlnaHQucG9zaXRpb24uc2V0KCAzMCwgNjAsIDYwICk7XG5cdFx0U3RhZ2UzZC5hZGQoQGNhbWVyYUxpZ2h0KVxuXG5cdFx0QGNhbWVyYUxpZ2h0MiA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4NDQzMzU1LCAuMiwgMjAwKVxuXHRcdEBjYW1lcmFMaWdodDIucG9zaXRpb24uc2V0KCAzMCwgNjAsIDYwICk7XG5cdFx0U3RhZ2UzZC5hZGQoQGNhbWVyYUxpZ2h0MilcblxuXHRcdHJldHVyblxuXG5cdGFkZEV2ZW50OigpPT5cblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywoZSk9PlxuXHRcdFx0QG1vdXNlLnggPSBlLmNsaWVudFhcblx0XHRcdEBtb3VzZS55ID0gZS5jbGllbnRZXG5cdFx0LGZhbHNlKVxuXHRcdHJldHVyblxuXG5cdG9uRGlhbW9uZExvYWQ6KGdlb21ldHJ5KT0+XG5cdFx0QGNvbXB1dGVHZW9tZXRyeShnZW9tZXRyeSlcblxuXHRcdG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoe2NvbG9yOiAweGZmZmZmZiwgdHJhbnNwYXJlbnQ6dHJ1ZSwgZW52TWFwOkBlbnZNYXB9KVxuXHRcdFxuXHRcdGlmIEB1c2VNYXAgdGhlbiBtYXRlcmlhbC5tYXAgPSBAbWFwXG5cblx0XHRtYXRlcmlhbC5zaGFkaW5nID0gQHNoYWRpbmdcblx0XHRtYXRlcmlhbC5vcGFjaXR5ID0gLjg1XG5cdFx0bWF0ZXJpYWwuc2lkZSA9IFRIUkVFLkRvdWJsZVNpZGVcblx0XHRtYXRlcmlhbC5jb21iaW5lID0gVEhSRUUuTWl4T3BlcmF0aW9uXG5cblx0XHRAZGlhbW9uZCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LG1hdGVyaWFsKVxuXHRcdEBjb250YWluZXIuYWRkKEBkaWFtb25kKVxuXG5cdFx0Zm9sZGVyID0gQGd1aS5hZGRGb2xkZXIoJ2RpYW1vbmQnKVxuXHRcdGZvbGRlci5hZGQoQGRpYW1vbmQubWF0ZXJpYWwsICdvcGFjaXR5JywgMCwgMSlcblx0XHRmb2xkZXIuYWRkKEBkaWFtb25kLm1hdGVyaWFsLCAncmVmbGVjdGl2aXR5JywwLDEpXG5cdFx0IyBmb2xkZXIuYWRkKEBkaWFtb25kLm1hdGVyaWFsLCAncmVmcmFjdGlvblJhdGlvJywwLDEpXG5cdFx0QGRpYW1vbmRDb2xvciA9IDB4ZmZmZmZmXG5cdFx0Zm9sZGVyLmFkZChAZGlhbW9uZC5tYXRlcmlhbCwgJ2NvbWJpbmUnLCB7bXVsdGlwbHk6VEhSRUUuTXVsdGlwbHksbWl4OlRIUkVFLk1peE9wZXJhdGlvbixhZGQ6VEhSRUUuQWRkT3BlcmF0aW9ufSlcblx0XHRmb2xkZXIuYWRkQ29sb3IoQCwgJ2RpYW1vbmRDb2xvcicpLm9uQ2hhbmdlKCgpPT5cblx0XHRcdGNvbnNvbGUubG9nKEBkaWFtb25kLm1hdGVyaWFsKVxuXHRcdFx0QGRpYW1vbmQubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KEBkaWFtb25kQ29sb3IpXG5cdFx0KVxuXHRcdCMgQGRpYW1vbmRVc2VEaWZmdXNlID0gZmFsc2Vcblx0XHQjIGZvbGRlci5hZGQoQCwgJ2RpYW1vbmRVc2VEaWZmdXNlJykub25DaGFuZ2UoKGUpPT5cblx0XHQjIFx0aWYgQGRpYW1vbmRVc2VEaWZmdXNlIHRoZW4gQGRpYW1vbmQubWF0ZXJpYWwubWFwID0gQG1hcFxuXHRcdCMgXHRlbHNlIEBkaWFtb25kLm1hdGVyaWFsLm1hcCA9IG51bGxcblx0XHQjIFx0QGRpYW1vbmQubWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlXG5cdFx0IyApXG5cblxuXHRcdHJldHVyblxuXG5cdG9uTWlycm9yTG9hZDooZ2VvbWV0cnkpPT5cblx0XHRAY29tcHV0ZUdlb21ldHJ5KGdlb21ldHJ5KVxuXHRcdG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwoe2NvbG9yOiAweGZmZmZmZiwgdHJhbnNwYXJlbnQ6dHJ1ZSwgZW52TWFwOkBlbnZNYXB9KVxuXHRcdGlmIEB1c2VNYXAgdGhlbiBtYXRlcmlhbC5tYXAgPSBAbWFwXG5cdFx0bWF0ZXJpYWwuc2hhZGluZyA9IEBzaGFkaW5nXG5cdFx0IyBtYXRlcmlhbC5zaWRlID0gVEhSRUUuRG91YmxlU2lkZVxuXHRcdG1hdGVyaWFsLmNvbWJpbmUgPSBUSFJFRS5BZGRPcGVyYXRpb25cblx0XHRtYXRlcmlhbC5yZWZsZWN0aXZpdHkgPSAuNDFcblx0XHRtYXRlcmlhbC5vcGFjaXR5ID0gMC45XG5cdFx0Y29uc29sZS5sb2cobWF0ZXJpYWwpXG5cdFx0IyBtYXRlcmlhbC5kZXB0aFdyaXRlID0gZmFsc2Vcblx0XHQjIG1hdGVyaWFsLmRlcHRoVGVzdCA9IGZhbHNlXG5cblx0XHRpZihAbWlycm9yKVxuXHRcdFx0QGNvbnRhaW5lci5yZW1vdmUoQG1pcnJvcilcblx0XHRAbWlycm9yID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksbWF0ZXJpYWwpXG5cdFx0QGNvbnRhaW5lci5hZGQoQG1pcnJvcilcblxuXHRcdGZvbGRlciA9IEBndWkuYWRkRm9sZGVyKCdtaXJyb3InKVxuXHRcdGZvbGRlci5hZGQoQG1pcnJvci5tYXRlcmlhbCwgJ29wYWNpdHknLCAwLCAxKVxuXHRcdGZvbGRlci5hZGQoQG1pcnJvci5tYXRlcmlhbCwgJ3JlZmxlY3Rpdml0eScsMCwxKVxuXG5cdFx0QG1pcnJvckNvbG9yID0gMHhmZmZmZmZcblx0XHRmb2xkZXIuYWRkKEBtaXJyb3IubWF0ZXJpYWwsICdjb21iaW5lJywge211bHRpcGx5OlRIUkVFLk11bHRpcGx5LG1peDpUSFJFRS5NaXhPcGVyYXRpb24sYWRkOlRIUkVFLkFkZE9wZXJhdGlvbn0pXG5cdFx0Zm9sZGVyLmFkZENvbG9yKEAsICdtaXJyb3JDb2xvcicpLm9uQ2hhbmdlKCgpPT5cblx0XHRcdEBtaXJyb3IubWF0ZXJpYWwuY29sb3Iuc2V0SGV4KEBtaXJyb3JDb2xvcilcblx0XHQpXG5cdFx0IyBmb2xkZXIuYWRkKEAsICd1c2VNYXAnKS5vbkNoYW5nZSgoZSk9PlxuXHRcdCMgXHRpZiBAdXNlTWFwIHRoZW4gQG1hdGVyaWFsLm1hcCA9IEBtYXBcblx0XHQjIFx0ZWxzZSBAbWF0ZXJpYWwubWFwID0gbnVsbFxuXHRcdCMgXHRAbWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlXG5cdFx0IyApXG5cdFx0cmV0dXJuXG5cblx0Y3JlYXRlR1VJOigpPT5cblx0XHRAZ3VpID0gbmV3IGRhdC5HVUkoKVxuXHRcdEB0ZXh0dXJlcyA9IG51bGxcblxuXHRcdEBtYXBzID0gW1xuXHRcdFx0VEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShcIi4vM2QvdGV4dHVyZXMvcHJldmlldzAxLmpwZ1wiKVxuXHRcdFx0VEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShcIi4vM2QvdGV4dHVyZXMvY3J5c3RhbC5qcGdcIilcblx0XHRcdFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmUoXCIuLzNkL3RleHR1cmVzL21hcmlvLnBuZ1wiKVxuXHRcdF1cblx0XHRAZW52TWFwcyA9IFtcblx0XHRcdFRIUkVFLkltYWdlVXRpbHMubG9hZFRleHR1cmVDdWJlKFtcIi4vM2QvdGV4dHVyZXMvcHJldmlldzAxLmpwZ1wiLFwiLi8zZC90ZXh0dXJlcy9wcmV2aWV3MDEuanBnXCIsXCIuLzNkL3RleHR1cmVzL3ByZXZpZXcwMS5qcGdcIixcIi4vM2QvdGV4dHVyZXMvcHJldmlldzAxLmpwZ1wiLFwiLi8zZC90ZXh0dXJlcy9wcmV2aWV3MDEuanBnXCIsXCIuLzNkL3RleHR1cmVzL3ByZXZpZXcwMS5qcGdcIl0pLFxuXHRcdFx0VEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZUN1YmUoW1wiLi8zZC90ZXh0dXJlcy9jcnlzdGFsLmpwZ1wiLFwiLi8zZC90ZXh0dXJlcy9jcnlzdGFsLmpwZ1wiLFwiLi8zZC90ZXh0dXJlcy9jcnlzdGFsLmpwZ1wiLFwiLi8zZC90ZXh0dXJlcy9jcnlzdGFsLmpwZ1wiLFwiLi8zZC90ZXh0dXJlcy9jcnlzdGFsLmpwZ1wiLFwiLi8zZC90ZXh0dXJlcy9jcnlzdGFsLmpwZ1wiXSksXG5cdFx0XHRUSFJFRS5JbWFnZVV0aWxzLmxvYWRUZXh0dXJlQ3ViZShbXCIuLzNkL3RleHR1cmVzL21hcmlvLnBuZ1wiLFwiLi8zZC90ZXh0dXJlcy9tYXJpby5wbmdcIixcIi4vM2QvdGV4dHVyZXMvbWFyaW8ucG5nXCIsXCIuLzNkL3RleHR1cmVzL21hcmlvLnBuZ1wiLFwiLi8zZC90ZXh0dXJlcy9tYXJpby5wbmdcIixcIi4vM2QvdGV4dHVyZXMvbWFyaW8ucG5nXCJdKVxuXHRcdF1cblx0XHRAZ3VpLmFkZChALCd0ZXh0dXJlcycse3hwMTonMCcseHAyOicxJyx4cDM6JzInfSkub25DaGFuZ2UoKGUpPT5cblx0XHRcdEBtaXJyb3IubWF0ZXJpYWwubWFwID0gQG1hcHNbQHRleHR1cmVzXVxuXHRcdFx0QG1pcnJvci5tYXRlcmlhbC5lbnZNYXBzID0gQGVudk1hcHNbQHRleHR1cmVzXVxuXHRcdFx0QGRpYW1vbmQubWF0ZXJpYWwuZW52TWFwID0gQGVudk1hcHNbQHRleHR1cmVzXVxuXHRcdFx0QGRpYW1vbmQubWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlXG5cdFx0XHRjb25zb2xlLmxvZyhAZGlhbW9uZC5tYXRlcmlhbClcblx0XHRcdHJldHVyblxuXHRcdClcblx0XHRyZXR1cm5cblxuXHRjb21wdXRlR2VvbWV0cnk6KGdlb21ldHJ5KS0+XG5cdFx0IyBjb21wdXRlIHRoZSBtb2RlbFxuXHRcdGdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpXG5cdFx0Z2VvbWV0cnkuY29tcHV0ZUZhY2VOb3JtYWxzKClcblx0XHRnZW9tZXRyeS5jb21wdXRlVmVydGV4Tm9ybWFscygpXG5cdFx0Z2VvbWV0cnkuY29tcHV0ZVRhbmdlbnRzKClcblx0XHRnZW9tZXRyeS5jb21wdXRlTW9ycGhOb3JtYWxzKClcblx0XHRnZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGUgPSB0cnVlXG5cdFx0Z2VvbWV0cnkubm9ybWFsc05lZWRVcGRhdGUgPSB0cnVlXG5cdFx0cmV0dXJuXG5cblx0dXBkYXRlOihkdCktPlxuXHRcdEB0aW1lICs9IGR0XG5cdFx0IyBAY29udGFpbmVyLnJvdGF0aW9uLnkgKz0gMC4wMDVcblx0XHRAY2FtZXJhTGlnaHQucG9zaXRpb24ueCA9IE1hdGguY29zKEB0aW1lKjAuMDAxKSoxMDBcblx0XHRAY2FtZXJhTGlnaHQyLnBvc2l0aW9uLnggPSBNYXRoLmNvcyhAdGltZSowLjAwMTUpKjEyMFxuXHRcdEBjYW1lcmFMaWdodDIucG9zaXRpb24ueSA9IE1hdGguc2luKEB0aW1lKjAuMDAxNSkqMTIwXG5cdFx0QGNvbnRhaW5lci5yb3RhdGlvbi55ICs9IChAbW91c2UueC93aW5kb3cuaW5uZXJXaWR0aC0uNSAtIEBjb250YWluZXIucm90YXRpb24ueSkqLjA5XG5cdFx0QGNvbnRhaW5lci5yb3RhdGlvbi54ICs9IChAbW91c2UueS93aW5kb3cuaW5uZXJXaWR0aC0uNSAtIEBjb250YWluZXIucm90YXRpb24ueCkqLjA5XG5cdFx0cmV0dXJuXG4iXX0=